<!DOCTYPE html>
<html lang="th" class="light-style layout-navbar-fixed layout-menu-fixed">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  <title>เบิก-คืนวัสดุคงทน | ระบบคลังสินค้าขนาดย่อม</title>

  <!-- Favicon -->
  <link rel="icon" type="image/x-icon" href="../assets/img/favicon/favicon.ico">

  <!-- Fonts -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Prompt:wght@300;400;500;600;700&display=swap" rel="stylesheet">

  <!-- Icons -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/boxicons/2.1.4/css/boxicons.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.2/css/all.min.css">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/flag-icon-css/7.2.3/css/flag-icons.min.css">

  <!-- Core CSS -->
  <link rel="stylesheet" href="../assets/vendor/css/rtl/core.css" class="template-customizer-core-css">
  <link rel="stylesheet" href="../assets/vendor/css/rtl/theme-default.css" class="template-customizer-theme-css">
  <link rel="stylesheet" href="../assets/css/demo.css">

  <!-- Vendors CSS -->
  <link rel="stylesheet" href="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.css">
  <link rel="stylesheet" href="../assets/vendor/libs/typeahead-js/typeahead.css">
  <link rel="stylesheet" href="../assets/vendor/libs/select2/select2.css">
  <link rel="stylesheet" href="../assets/vendor/libs/flatpickr/flatpickr.css">
  <link rel="stylesheet" href="../assets/vendor/libs/datatables-bs5/datatables.bootstrap5.css">
  <link rel="stylesheet" href="../assets/vendor/libs/datatables-responsive-bs5/responsive.bootstrap5.css">
  <link rel="stylesheet" href="../assets/vendor/libs/sweetalert2/sweetalert2.css">

  <!-- Page CSS -->
  <style>
    .badge-available {
      background-color: #E8F8F3;
      color: #28C76F;
    }
    .badge-inuse {
      background-color: #FFF2D6;
      color: #FF9F43;
    }
    .badge-repair {
      background-color: #FFF0F3;
      color: #EA5455;
    }
    .custom-option-icon {
      background-color: #F9F9FC;
      border-radius: 0.375rem;
      padding: 1.25rem;
      border: 1px solid #D9DEE3;
      cursor: pointer;
      transition: all 0.2s ease;
    }
    .custom-option-icon:hover {
      border-color: #7367F0;
    }
    .custom-option-icon.checked {
      border-color: #7367F0;
      background-color: #F6F6FE;
    }
    .custom-option-icon .custom-option-body {
      display: flex;
      align-items: center;
      flex-direction: column;
      text-align: center;
    }
    .item-card:hover {
      border-color: #7367F0;
      transform: translateY(-5px);
      box-shadow: 0 0.25rem 1rem rgba(165, 163, 174, 0.45);
    }
    .item-card {
      cursor: pointer;
      transition: all 0.2s ease;
    }
  </style>

  <!-- Helpers -->
  <script src="../assets/vendor/js/helpers.js"></script>
  <script src="../assets/js/config.js"></script>
</head>

<body>
  <!-- Layout wrapper -->
  <div class="layout-wrapper layout-content-navbar">
    <div class="layout-container">
      
      <!-- Menu -->
      <aside id="layout-menu" class="layout-menu menu-vertical menu bg-menu-theme">
        <div class="app-brand demo">
          <a href="dashboard.html" class="app-brand-link">
            <span class="app-brand-logo demo">
              <svg width="26px" height="26px" viewBox="0 0 26 26" version="1.1">
                <polygon points="7.5 2 7.5 5 4.5 5 4.5 22 17 22 17 19 22 19 22 5 17 5 17 2" fill="#696cff" />
                <polygon points="13 15 10 12 13 9 16 12" fill="#696cff" opacity="0.7" />
              </svg>
            </span>
            <span class="app-brand-text demo menu-text fw-bold ms-2">คลังสินค้า</span>
          </a>

          <a href="javascript:void(0);" class="layout-menu-toggle menu-link text-large ms-auto">
            <i class="bx menu-toggle-icon d-none d-xl-block fs-4"></i>
            <i class="bx bx-x d-block d-xl-none bx-sm"></i>
          </a>
        </div>

        <div class="menu-divider mt-0"></div>

        <div class="menu-inner-shadow"></div>

        <ul class="menu-inner py-1">
          <!-- Dashboard -->
          <li class="menu-item">
            <a href="dashboard.html" class="menu-link">
              <i class="menu-icon tf-icons bx bx-home-circle"></i>
              <div data-i18n="หน้าหลัก">หน้าหลัก</div>
            </a>
          </li>

          <!-- วัสดุ -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">จัดการวัสดุและเครื่องมือ</span>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-package"></i>
              <div data-i18n="วัสดุสิ้นเปลือง">วัสดุสิ้นเปลือง</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="consumable-list.html" class="menu-link">
                  <div data-i18n="รายการวัสดุ">รายการวัสดุ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="consumable-add.html" class="menu-link">
                  <div data-i18n="เพิ่มวัสดุใหม่">เพิ่มวัสดุใหม่</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="consumable-withdraw.html" class="menu-link">
                  <div data-i18n="เบิกวัสดุ">เบิกวัสดุ</div>
                </a>
              </li>
            </ul>
          </li>

          <li class="menu-item active open">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-cube-alt"></i>
              <div data-i18n="วัสดุคงทน">วัสดุคงทน</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="durable-list.html" class="menu-link">
                  <div data-i18n="รายการวัสดุ">รายการวัสดุ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="durable-add.html" class="menu-link">
                  <div data-i18n="เพิ่มวัสดุใหม่">เพิ่มวัสดุใหม่</div>
                </a>
              </li>
              <li class="menu-item active">
                <a href="durable-withdraw.html" class="menu-link">
                  <div data-i18n="เบิก-คืนวัสดุ">เบิก-คืนวัสดุ</div>
                </a>
              </li>
            </ul>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-wrench"></i>
              <div data-i18n="เครื่องมือ">เครื่องมือ</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="tools-list.html" class="menu-link">
                  <div data-i18n="รายการเครื่องมือ">รายการเครื่องมือ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="tools-add.html" class="menu-link">
                  <div data-i18n="เพิ่มเครื่องมือใหม่">เพิ่มเครื่องมือใหม่</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="tools-withdraw.html" class="menu-link">
                  <div data-i18n="เบิก-คืนเครื่องมือ">เบิก-คืนเครื่องมือ</div>
                </a>
              </li>
            </ul>
          </li>

          <!-- รถ -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">จัดการรถ</span>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-car"></i>
              <div data-i18n="ยานพาหนะ">ยานพาหนะ</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="vehicle-list.html" class="menu-link">
                  <div data-i18n="รายการรถ">รายการรถ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="vehicle-add.html" class="menu-link">
                  <div data-i18n="เพิ่มรถใหม่">เพิ่มรถใหม่</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="vehicle-repair.html" class="menu-link">
                  <div data-i18n="บันทึกการซ่อม">บันทึกการซ่อม</div>
                </a>
              </li>
            </ul>
          </li>

          <!-- รายงาน -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">รายงาน</span>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-line-chart"></i>
              <div data-i18n="รายงานต่างๆ">รายงานต่างๆ</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="report-monthly-tools.html" class="menu-link">
                  <div data-i18n="รายงานเครื่องมือประจำเดือน">รายงานเครื่องมือประจำเดือน</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="report-vehicle-cost.html" class="menu-link">
                  <div data-i18n="รายงานค่าใช้จ่ายรถ">รายงานค่าใช้จ่ายรถ</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="report-executive.html" class="menu-link">
                  <div data-i18n="รายงานสำหรับผู้บริหาร">รายงานสำหรับผู้บริหาร</div>
                </a>
              </li>
            </ul>
          </li>

          <!-- ผู้ใช้งาน (เฉพาะผู้บริหาร) -->
          <li class="menu-header small text-uppercase">
            <span class="menu-header-text">ระบบจัดการ</span>
          </li>

          <li class="menu-item">
            <a href="javascript:void(0);" class="menu-link menu-toggle">
              <i class="menu-icon tf-icons bx bx-user"></i>
              <div data-i18n="ผู้ใช้งาน">ผู้ใช้งาน</div>
            </a>
            <ul class="menu-sub">
              <li class="menu-item">
                <a href="user-list.html" class="menu-link">
                  <div data-i18n="รายชื่อผู้ใช้">รายชื่อผู้ใช้</div>
                </a>
              </li>
              <li class="menu-item">
                <a href="user-add.html" class="menu-link">
                  <div data-i18n="เพิ่มผู้ใช้ใหม่">เพิ่มผู้ใช้ใหม่</div>
                </a>
              </li>
            </ul>
          </li>
        </ul>
      </aside>
      <!-- / Menu -->

      <!-- Layout container -->
      <div class="layout-page">
        <!-- Navbar -->
        <nav class="layout-navbar container-xxl navbar navbar-expand-xl navbar-detached align-items-center bg-navbar-theme" id="layout-navbar">
          <div class="layout-menu-toggle navbar-nav align-items-xl-center me-3 me-xl-0 d-xl-none">
            <a class="nav-item nav-link px-0 me-xl-4" href="javascript:void(0)">
              <i class="bx bx-menu bx-sm"></i>
            </a>
          </div>

          <div class="navbar-nav-right d-flex align-items-center" id="navbar-collapse">
            <!-- Search -->
            <div class="navbar-nav align-items-center">
              <div class="nav-item navbar-search-wrapper mb-0">
                <a class="nav-item nav-link search-toggler px-0" href="javascript:void(0);">
                  <i class="bx bx-search-alt bx-sm"></i>
                  <span class="d-none d-md-inline-block text-muted">ค้นหา (Ctrl+/)</span>
                </a>
              </div>
            </div>
            <!-- /Search -->

            <ul class="navbar-nav flex-row align-items-center ms-auto">
              <!-- User -->
              <li class="nav-item navbar-dropdown dropdown-user dropdown">
                <a class="nav-link dropdown-toggle hide-arrow" href="javascript:void(0);" data-bs-toggle="dropdown">
                  <div class="avatar avatar-online">
                    <img src="../assets/img/avatars/1.png" alt class="rounded-circle">
                  </div>
                </a>
                <ul class="dropdown-menu dropdown-menu-end">
                  <li>
                    <a class="dropdown-item" href="account-settings.html">
                      <div class="d-flex">
                        <div class="flex-shrink-0 me-3">
                          <div class="avatar avatar-online">
                            <img src="../assets/img/avatars/1.png" alt class="rounded-circle">
                          </div>
                        </div>
                        <div class="flex-grow-1">
                          <span class="fw-semibold d-block">สมชาย มีสุข</span>
                          <small class="text-muted">ผู้บริหาร</small>
                        </div>
                      </div>
                    </a>
                  </li>
                  <li>
                    <div class="dropdown-divider"></div>
                  </li>
                  <li>
                    <a class="dropdown-item" href="account-settings.html">
                      <i class="bx bx-user me-2"></i>
                      <span class="align-middle">ข้อมูลส่วนตัว</span>
                    </a>
                  </li>
                  <li>
                    <div class="dropdown-divider"></div>
                  </li>
                  <li>
                    <a class="dropdown-item" href="login.html">
                      <i class="bx bx-power-off me-2"></i>
                      <span class="align-middle">ออกจากระบบ</span>
                    </a>
                  </li>
                </ul>
              </li>
              <!--/ User -->
            </ul>
          </div>
        </nav>
        <!-- / Navbar -->

        <!-- Content wrapper -->
        <div class="content-wrapper">
          <!-- Content -->
          <div class="container-xxl flex-grow-1 container-p-y">
            <h4 class="fw-bold py-3 mb-4">
              <span class="text-muted fw-light">วัสดุคงทน /</span> เบิก-คืนวัสดุคงทน
            </h4>

            <!-- เลือกประเภทการทำรายการ -->
            <div class="row mb-4">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-body">
                    <div class="row">
                      <div class="col-md-6">
                        <div class="custom-option-icon mb-3 mb-md-0 checked" id="withdrawOption">
                          <div class="custom-option-body">
                            <i class="bx bx-log-in-circle mb-2 fs-1 text-primary"></i>
                            <span class="custom-option-title fs-4 fw-semibold">เบิกวัสดุคงทน</span>
                            <small>ทำรายการเบิกวัสดุคงทนไปใช้งาน สำหรับโครงการหรืองานต่างๆ</small>
                          </div>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="custom-option-icon" id="returnOption">
                          <div class="custom-option-body">
                            <i class="bx bx-log-out-circle mb-2 fs-1 text-primary"></i>
                            <span class="custom-option-title fs-4 fw-semibold">คืนวัสดุคงทน</span>
                            <small>ทำรายการคืนวัสดุคงทนที่เคยเบิกไปใช้งานกลับสู่คลัง</small>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- แบบฟอร์มเบิกวัสดุ -->
            <div id="withdrawForm" class="row">
              <div class="col-md-12">
                <div class="card mb-4">
                  <div class="card-header">
                    <h5 class="card-title">เบิกวัสดุคงทน</h5>
                  </div>
                  <div class="card-body">
                    <!-- ข้อมูลการเบิก -->
                    <div class="row mb-4">
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label for="projectSelect" class="form-label">โครงการ/งาน *</label>
                          <select id="projectSelect" class="select2 form-select" required>
                            <option value="">--- เลือกโครงการ/งาน ---</option>
                            <option value="1">โครงการปรับปรุงสำนักงาน 2567</option>
                            <option value="2">งานประชุมลูกค้าประจำเดือน</option>
                            <option value="3">โครงการพัฒนาระบบคลังสินค้า</option>
                            <option value="4">โครงการอบรมพนักงานใหม่</option>
                            <option value="5">งานวิเคราะห์ข้อมูลฝ่ายบัญชี</option>
                            <option value="0">อื่นๆ (ระบุ)</option>
                          </select>
                        </div>
                        <div class="mb-3" id="otherProjectDiv" style="display: none;">
                          <label for="otherProject" class="form-label">ระบุโครงการ/งาน *</label>
                          <input type="text" id="otherProject" class="form-control" placeholder="ชื่อโครงการ/งาน">
                        </div>
                        <div class="mb-3">
                          <label for="requestor" class="form-label">ผู้เบิก *</label>
                          <select id="requestor" class="select2 form-select" required>
                            <option value="1" selected>สมชาย มีสุข (ผู้บริหาร)</option>
                            <option value="2">สมหญิง รักดี (เจ้าหน้าที่คลังสินค้า)</option>
                            <option value="3">ชาติชาย ใจเย็น (พนักงานคลังสินค้า)</option>
                            <option value="4">ณัฐพงษ์ รุ่งเรือง (ผู้จัดการฝ่ายบุคคล)</option>
                            <option value="5">มานะ สมบัติ (พนักงานขับรถ)</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label for="withdrawDate" class="form-label">วันที่เบิก *</label>
                          <input type="text" class="form-control flatpickr-date" id="withdrawDate" value="28/05/2567" required>
                        </div>
                        <div class="mb-3">
                          <label for="returnDate" class="form-label">กำหนดคืน *</label>
                          <input type="text" class="form-control flatpickr-date" id="returnDate" required>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label for="withdrawPurpose" class="form-label">วัตถุประสงค์ในการเบิก</label>
                          <textarea class="form-control" id="withdrawPurpose" rows="3" placeholder="ระบุวัตถุประสงค์ในการเบิกวัสดุ"></textarea>
                        </div>
                        <div class="mb-3">
                          <label for="withdrawNote" class="form-label">หมายเหตุเพิ่มเติม</label>
                          <textarea class="form-control" id="withdrawNote" rows="3" placeholder="บันทึกเพิ่มเติม (ถ้ามี)"></textarea>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">ผู้อนุมัติ</label>
                          <input type="text" class="form-control" value="สมชาย มีสุข (ผู้บริหาร)" readonly>
                        </div>
                      </div>
                    </div>

                    <!-- ค้นหาวัสดุ -->
                    <div class="row mb-4">
                      <div class="col-md-12">
                        <div class="divider divider-info">
                          <div class="divider-text">
                            <i class="bx bx-search-alt me-1"></i> ค้นหาวัสดุที่ต้องการเบิก
                          </div>
                        </div>
                      </div>
                      <div class="col-md-12 mt-3">
                        <div class="row g-3">
                          <div class="col-md-4">
                            <label class="form-label">รหัส/ชื่อวัสดุ</label>
                            <div class="input-group">
                              <span class="input-group-text"><i class="bx bx-search"></i></span>
                              <input type="text" class="form-control" id="searchItemKeyword" placeholder="รหัสหรือชื่อวัสดุ...">
                            </div>
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">ประเภทวัสดุ</label>
                            <select id="searchItemType" class="form-select">
                              <option value="">ทั้งหมด</option>
                              <option value="office">เฟอร์นิเจอร์สำนักงาน</option>
                              <option value="electronics">อุปกรณ์อิเล็กทรอนิกส์</option>
                              <option value="computer">คอมพิวเตอร์และอุปกรณ์</option>
                              <option value="meeting">อุปกรณ์ห้องประชุม</option>
                              <option value="comm">อุปกรณ์สื่อสาร</option>
                              <option value="other">อื่นๆ</option>
                            </select>
                          </div>
                          <div class="col-md-3">
                            <label class="form-label">สถานะวัสดุ</label>
                            <select id="searchItemStatus" class="form-select">
                              <option value="available" selected>พร้อมใช้งาน</option>
                              <option value="all">ทั้งหมด</option>
                            </select>
                          </div>
                          <div class="col-md-2 d-flex align-items-end">
                            <button type="button" class="btn btn-primary w-100" id="searchItemButton">
                              <i class="bx bx-search-alt me-1"></i> ค้นหา
                            </button>
                          </div>
                        </div>
                      </div>
                    </div>

                    <!-- ผลการค้นหาวัสดุ -->
                    <div class="row mb-4" id="searchResults">
                      <div class="col-md-12">
                        <h6 class="fw-semibold mb-3">วัสดุที่สามารถเบิกได้</h6>
                      </div>
                      
                      <!-- Item Card 1 -->
                      <div class="col-md-4 mb-3">
                        <div class="card item-card h-100">
                          <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                              <span class="badge badge-available me-2 fw-semibold"><i class="bx bx-check-circle me-1"></i> พร้อมใช้งาน</span>
                              <span class="badge bg-label-secondary fw-semibold">D001</span>
                            </div>
                            <div class="d-flex align-items-center mb-3">
                              <div class="avatar avatar-lg me-2">
                                <span class="avatar-initial rounded bg-label-primary">
                                  <i class="bx bx-chair fs-3"></i>
                                </span>
                              </div>
                              <div>
                                <h5 class="mb-0">โต๊ะทำงานผู้บริหาร</h5>
                                <small class="text-muted">เฟอร์นิเจอร์สำนักงาน</small>
                              </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                              <div class="text-muted small">ห้องผู้บริหาร ชั้น 3</div>
                              <div class="text-end">
                                <a href="#" class="btn btn-sm btn-outline-primary" onclick="selectItem('D001', 'โต๊ะทำงานผู้บริหาร', 25000)">
                                  <i class="bx bx-plus me-1"></i> เลือก
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <!-- Item Card 2 -->
                      <div class="col-md-4 mb-3">
                        <div class="card item-card h-100">
                          <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                              <span class="badge badge-available me-2 fw-semibold"><i class="bx bx-check-circle me-1"></i> พร้อมใช้งาน</span>
                              <span class="badge bg-label-secondary fw-semibold">D003</span>
                            </div>
                            <div class="d-flex align-items-center mb-3">
                              <div class="avatar avatar-lg me-2">
                                <span class="avatar-initial rounded bg-label-info">
                                  <i class="bx bx-desktop fs-3"></i>
                                </span>
                              </div>
                              <div>
                                <h5 class="mb-0">เครื่องคอมพิวเตอร์ Dell OptiPlex</h5>
                                <small class="text-muted">คอมพิวเตอร์และอุปกรณ์</small>
                              </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                              <div class="text-muted small">ห้อง IT ชั้น 2</div>
                              <div class="text-end">
                                <a href="#" class="btn btn-sm btn-outline-primary" onclick="selectItem('D003', 'เครื่องคอมพิวเตอร์ Dell OptiPlex', 32000)">
                                  <i class="bx bx-plus me-1"></i> เลือก
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <!-- Item Card 3 -->
                      <div class="col-md-4 mb-3">
                        <div class="card item-card h-100">
                          <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                              <span class="badge badge-available me-2 fw-semibold"><i class="bx bx-check-circle me-1"></i> พร้อมใช้งาน</span>
                              <span class="badge bg-label-secondary fw-semibold">D005</span>
                            </div>
                            <div class="d-flex align-items-center mb-3">
                              <div class="avatar avatar-lg me-2">
                                <span class="avatar-initial rounded bg-label-primary">
                                  <i class="bx bx-table fs-3"></i>
                                </span>
                              </div>
                              <div>
                                <h5 class="mb-0">โต๊ะประชุม 12 ที่นั่ง</h5>
                                <small class="text-muted">เฟอร์นิเจอร์สำนักงาน</small>
                              </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                              <div class="text-muted small">ห้องประชุมใหญ่ ชั้น 4</div>
                              <div class="text-end">
                                <a href="#" class="btn btn-sm btn-outline-primary" onclick="selectItem('D005', 'โต๊ะประชุม 12 ที่นั่ง', 45000)">
                                  <i class="bx bx-plus me-1"></i> เลือก
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                      <!-- Item Card 4 -->
                      <div class="col-md-4 mb-3">
                        <div class="card item-card h-100">
                          <div class="card-body">
                            <div class="d-flex align-items-center mb-2">
                              <span class="badge badge-available me-2 fw-semibold"><i class="bx bx-check-circle me-1"></i> พร้อมใช้งาน</span>
                              <span class="badge bg-label-secondary fw-semibold">D007</span>
                            </div>
                            <div class="d-flex align-items-center mb-3">
                              <div class="avatar avatar-lg me-2">
                                <span class="avatar-initial rounded bg-label-success">
                                  <i class="bx bx-tv fs-3"></i>
                                </span>
                              </div>
                              <div>
                                <h5 class="mb-0">โทรทัศน์ LED 55 นิ้ว</h5>
                                <small class="text-muted">อุปกรณ์อิเล็กทรอนิกส์</small>
                              </div>
                            </div>
                            <div class="d-flex justify-content-between align-items-center mb-2">
                              <div class="text-muted small">ห้องพักผ่อน ชั้น 2</div>
                              <div class="text-end">
                                <a href="#" class="btn btn-sm btn-outline-primary" onclick="selectItem('D007', 'โทรทัศน์ LED 55 นิ้ว', 18500)">
                                  <i class="bx bx-plus me-1"></i> เลือก
                                </a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                      
                    </div>

                    <!-- รายการที่เลือกเบิก -->
                    <div class="row mb-4">
                      <div class="col-md-12">
                        <div class="divider divider-primary">
                          <div class="divider-text">
                            <i class="bx bx-cart me-1"></i> รายการวัสดุที่เลือกเบิก
                          </div>
                        </div>
                      </div>
                      <div class="col-md-12 mt-3">
                        <div class="table-responsive">
                          <table class="table table-bordered" id="selectedItemsTable">
                            <thead>
                              <tr>
                                <th>รหัสวัสดุ</th>
                                <th style="width: 45%;">ชื่อวัสดุ</th>
                                <th>มูลค่า (บาท)</th>
                                <th>เหตุผลการเบิก</th>
                                <th>จัดการ</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr class="empty-row">
                                <td colspan="5" class="text-center py-4 text-muted">
                                  <i class="bx bx-package mb-2" style="font-size: 2rem;"></i>
                                  <p class="mb-0">ยังไม่มีรายการที่เลือก</p>
                                  <small>กรุณาค้นหาและเลือกวัสดุที่ต้องการเบิก</small>
                                </td>
                              </tr>
                            </tbody>
                            <tfoot id="cartFooter" style="display: none;">
                              <tr>
                                <th colspan="2" class="text-end">รวมมูลค่าทั้งหมด</th>
                                <th colspan="3" id="totalPrice">0.00 บาท</th>
                              </tr>
                            </tfoot>
                          </table>
                        </div>
                      </div>
                    </div>

                    <!-- ปุ่มดำเนินการ -->
                    <div class="row">
                      <div class="col-md-12 text-end">
                        <button type="button" class="btn btn-outline-secondary me-2" onclick="window.location.href='durable-list.html'">
                          <i class="bx bx-arrow-back me-1"></i> ยกเลิก
                        </button>
                        <button type="button" class="btn btn-primary" id="submitWithdrawBtn">
                          <i class="bx bx-check me-1"></i> บันทึกการเบิก
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- แบบฟอร์มคืนวัสดุ -->
            <div id="returnForm" class="row" style="display: none;">
              <div class="col-md-12">
                <div class="card mb-4">
                  <div class="card-header">
                    <h5 class="card-title">คืนวัสดุคงทน</h5>
                  </div>
                  <div class="card-body">
                    <!-- ข้อมูลการคืน -->
                    <div class="row mb-4">
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label for="returnUser" class="form-label">ผู้คืน *</label>
                          <select id="returnUser" class="select2 form-select" required>
                            <option value="1" selected>สมชาย มีสุข (ผู้บริหาร)</option>
                            <option value="2">สมหญิง รักดี (เจ้าหน้าที่คลังสินค้า)</option>
                            <option value="3">ชาติชาย ใจเย็น (พนักงานคลังสินค้า)</option>
                            <option value="4">ณัฐพงษ์ รุ่งเรือง (ผู้จัดการฝ่ายบุคคล)</option>
                            <option value="5">มานะ สมบัติ (พนักงานขับรถ)</option>
                          </select>
                        </div>
                        <div class="mb-3">
                          <label for="actualReturnDate" class="form-label">วันที่คืน *</label>
                          <input type="text" class="form-control flatpickr-date" id="actualReturnDate" value="28/05/2567" required>
                        </div>
                      </div>
                      <div class="col-md-6">
                        <div class="mb-3">
                          <label for="returnNote" class="form-label">หมายเหตุการคืน</label>
                          <textarea class="form-control" id="returnNote" rows="3" placeholder="บันทึกเพิ่มเติมเกี่ยวกับการคืนวัสดุ"></textarea>
                        </div>
                        <div class="mb-3">
                          <label class="form-label">ผู้ตรวจรับ</label>
                          <input type="text" class="form-control" value="สมหญิง รักดี (เจ้าหน้าที่คลังสินค้า)" readonly>
                        </div>
                      </div>
                    </div>

                    <!-- รายการที่เบิกไป -->
                    <div class="row mb-4">
                      <div class="col-md-12">
                        <div class="divider divider-info">
                          <div class="divider-text">
                            <i class="bx bx-list-ul me-1"></i> รายการที่เบิกไปและยังไม่ได้คืน
                          </div>
                        </div>
                      </div>
                      <div class="col-md-12 mt-3">
                        <div class="table-responsive">
                          <table class="table table-striped" id="borrowedItemsTable">
                            <thead>
                              <tr>
                                <th style="width: 5%;">#</th>
                                <th style="width: 12%;">รหัสวัสดุ</th>
                                <th style="width: 25%;">ชื่อวัสดุ</th>
                                <th style="width: 18%;">โครงการ/งาน</th>
                                <th style="width: 12%;">วันที่เบิก</th>
                                <th style="width: 12%;">กำหนดคืน</th>
                                <th style="width: 16%;">จัดการ</th>
                              </tr>
                            </thead>
                            <tbody>
                              <!-- รายการที่ 1 -->
                              <tr>
                                <td>1</td>
                                <td>D002</td>
                                <td>เครื่องปริ้นเตอร์ Brother MFC</td>
                                <td>งานเอกสารฝ่ายบุคคล</td>
                                <td>27/05/2567</td>
                                <td class="text-danger">28/05/2567</td>
                                <td>
                                  <button type="button" class="btn btn-sm btn-primary" onclick="selectForReturn('D002', 'เครื่องปริ้นเตอร์ Brother MFC', 'งานเอกสารฝ่ายบุคคล', '27/05/2567')">
                                    <i class="bx bx-check-circle me-1"></i> คืน
                                  </button>
                                </td>
                              </tr>
                              <!-- รายการที่ 2 -->
                              <tr>
                                <td>2</td>
                                <td>D005</td>
                                <td>โต๊ะประชุม 12 ที่นั่ง</td>
                                <td>ประชุมลูกค้าประจำเดือน</td>
                                <td>25/05/2567</td>
                                <td class="text-danger">27/05/2567</td>
                                <td>
                                  <button type="button" class="btn btn-sm btn-primary" onclick="selectForReturn('D005', 'โต๊ะประชุม 12 ที่นั่ง', 'ประชุมลูกค้าประจำเดือน', '25/05/2567')">
                                    <i class="bx bx-check-circle me-1"></i> คืน
                                  </button>
                                </td>
                              </tr>
                              <!-- รายการที่ 3 -->
                              <tr>
                                <td>3</td>
                                <td>D007</td>
                                <td>โทรทัศน์ LED 55 นิ้ว</td>
                                <td>งานนำเสนอโครงการ</td>
                                <td>22/05/2567</td>
                                <td>29/05/2567</td>
                                <td>
                                  <button type="button" class="btn btn-sm btn-primary" onclick="selectForReturn('D007', 'โทรทัศน์ LED 55 นิ้ว', 'งานนำเสนอโครงการ', '22/05/2567')">
                                    <i class="bx bx-check-circle me-1"></i> คืน
                                  </button>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>

                    <!-- รายการที่เลือกคืน -->
                    <div class="row mb-4">
                      <div class="col-md-12">
                        <div class="divider divider-success">
                          <div class="divider-text">
                            <i class="bx bx-package me-1"></i> รายการวัสดุที่เลือกคืน
                          </div>
                        </div>
                      </div>
                      <div class="col-md-12 mt-3">
                        <div class="table-responsive">
                          <table class="table table-bordered" id="returnItemsTable">
                            <thead>
                              <tr>
                                <th style="width: 15%;">รหัสวัสดุ</th>
                                <th style="width: 30%;">ชื่อวัสดุ</th>
                                <th style="width: 15%;">วันที่เบิก</th>
                                <th style="width: 25%;">สภาพวัสดุ</th>
                                <th style="width: 15%;">จัดการ</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr class="empty-row">
                                <td colspan="5" class="text-center py-4 text-muted">
                                  <i class="bx bx-package mb-2" style="font-size: 2rem;"></i>
                                  <p class="mb-0">ยังไม่มีรายการที่เลือก</p>
                                  <small>กรุณาเลือกวัสดุที่ต้องการคืน</small>
                                </td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                    </div>

                    <!-- ปุ่มดำเนินการ -->
                    <div class="row">
                      <div class="col-md-12 text-end">
                        <button type="button" class="btn btn-outline-secondary me-2" onclick="window.location.href='durable-list.html'">
                          <i class="bx bx-arrow-back me-1"></i> ยกเลิก
                        </button>
                        <button type="button" class="btn btn-success" id="submitReturnBtn">
                          <i class="bx bx-check me-1"></i> บันทึกการคืน
                        </button>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- ประวัติการเบิก-คืนล่าสุด -->
            <div class="row">
              <div class="col-md-12">
                <div class="card">
                  <div class="card-header d-flex justify-content-between align-items-center">
                    <h5 class="card-title mb-0">ประวัติการเบิก-คืนล่าสุด</h5>
                    <button type="button" class="btn btn-outline-primary btn-sm" onclick="window.location.href='durable-withdraw-history.html'">
                      <i class="bx bx-history me-1"></i> ดูประวัติทั้งหมด
                    </button>
                  </div>
                  <div class="table-responsive">
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th>วันที่ทำรายการ</th>
                          <th>รหัสวัสดุ</th>
                          <th>ชื่อวัสดุ</th>
                          <th>ประเภท</th>
                          <th>ผู้ทำรายการ</th>
                          <th>โครงการ/งาน</th>
                          <th>สถานะ</th>
                        </tr>
                      </thead>
                      <tbody>
                        <tr>
                          <td>27/05/2567</td>
                          <td>D002</td>
                          <td>เครื่องปริ้นเตอร์ Brother MFC</td>
                          <td><span class="badge bg-primary">เบิก</span></td>
                          <td>สมหญิง รักดี</td>
                          <td>งานเอกสารฝ่ายบุคคล</td>
                          <td><span class="badge bg-label-warning">กำลังใช้งาน</span></td>
                        </tr>
                        <tr>
                          <td>26/05/2567</td>
                          <td>D003</td>
                          <td>เครื่องคอมพิวเตอร์ Dell OptiPlex</td>
                          <td><span class="badge bg-success">คืน</span></td>
                          <td>ชาติชาย ใจเย็น</td>
                          <td>โปรเจคพัฒนาเว็บไซต์</td>
                          <td><span class="badge bg-label-success">พร้อมใช้งาน</span></td>
                        </tr>
                        <tr>
                          <td>25/05/2567</td>
                          <td>D005</td>
                          <td>โต๊ะประชุม 12 ที่นั่ง</td>
                          <td><span class="badge bg-primary">เบิก</span></td>
                          <td>สมชาย มีสุข</td>
                          <td>ประชุมลูกค้าประจำเดือน</td>
                          <td><span class="badge bg-label-warning">กำลังใช้งาน</span></td>
                        </tr>
                        <tr>
                          <td>22/05/2567</td>
                          <td>D007</td>
                          <td>โทรทัศน์ LED 55 นิ้ว</td>
                          <td><span class="badge bg-primary">เบิก</span></td>
                          <td>ณัฐพงษ์ รุ่งเรือง</td>
                          <td>งานนำเสนอโครงการ</td>
                          <td><span class="badge bg-label-warning">กำลังใช้งาน</span></td>
                        </tr>
                        <tr>
                          <td>20/05/2567</td>
                          <td>D008</td>
                          <td>เครื่องเสียงห้องประชุม</td>
                          <td><span class="badge bg-success">คืน</span></td>
                          <td>สมชาย มีสุข</td>
                          <td>ประชุมผู้ถือหุ้น</td>
                          <td><span class="badge bg-label-success">พร้อมใช้งาน</span></td>
                        </tr>
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <!-- / Content -->

          <!-- Footer -->
          <footer class="content-footer footer bg-footer-theme">
            <div class="container-xxl d-flex flex-wrap justify-content-between py-2 flex-md-row flex-column">
              <div class="mb-2 mb-md-0">
                © <script>
                  document.write(new Date().getFullYear())
                </script>
                , ระบบคลังสินค้าขนาดย่อม v1.0
              </div>
              <div>
                <a href="#" class="footer-link me-4">หน้าหลัก</a>
                <a href="#" class="footer-link me-4">เกี่ยวกับเรา</a>
                <a href="#" class="footer-link me-4">ช่วยเหลือ</a>
                <a href="#" class="footer-link">ติดต่อเรา</a>
              </div>
            </div>
          </footer>
          <!-- / Footer -->

          <div class="content-backdrop fade"></div>
        </div>
        <!-- Content wrapper -->
      </div>
      <!-- / Layout page -->
    </div>

    <!-- Overlay -->
    <div class="layout-overlay layout-menu-toggle"></div>
  </div>
  <!-- / Layout wrapper -->

  <!-- Modal Success -->
  <div class="modal fade" id="withdrawSuccessModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header border-bottom">
          <h5 class="modal-title">ทำรายการสำเร็จ</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center py-4">
          <i class="bx bx-check-circle text-success mb-3" style="font-size: 5rem;"></i>
          <h4 class="mb-3">บันทึกการเบิกวัสดุเรียบร้อยแล้ว</h4>
          <p class="mb-1">เลขที่รายการ: <strong>WD-20240528001</strong></p>
          <p>สถานะ: <span class="badge bg-label-success">เรียบร้อย</span></p>
        </div>
        <div class="modal-footer border-top">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">ปิดหน้าต่าง</button>
          <button type="button" class="btn btn-primary" onclick="window.location.href='durable-withdraw-history.html'">
            ดูประวัติการเบิก-คืน
          </button>
        </div>
      </div>
    </div>
  </div>

  <div class="modal fade" id="returnSuccessModal" tabindex="-1" aria-hidden="true">
    <div class="modal-dialog modal-dialog-centered" role="document">
      <div class="modal-content">
        <div class="modal-header border-bottom">
          <h5 class="modal-title">ทำรายการสำเร็จ</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
        </div>
        <div class="modal-body text-center py-4">
          <i class="bx bx-check-circle text-success mb-3" style="font-size: 5rem;"></i>
          <h4 class="mb-3">บันทึกการคืนวัสดุเรียบร้อยแล้ว</h4>
          <p class="mb-1">เลขที่รายการ: <strong>RT-20240528002</strong></p>
          <p>สถานะ: <span class="badge bg-label-success">เรียบร้อย</span></p>
        </div>
        <div class="modal-footer border-top">
          <button type="button" class="btn btn-outline-secondary" data-bs-dismiss="modal">ปิดหน้าต่าง</button>
          <button type="button" class="btn btn-primary" onclick="window.location.href='durable-withdraw-history.html'">
            ดูประวัติการเบิก-คืน
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Core JS -->
  <script src="../assets/vendor/libs/jquery/jquery.js"></script>
  <script src="../assets/vendor/libs/popper/popper.js"></script>
  <script src="../assets/vendor/js/bootstrap.js"></script>
  <script src="../assets/vendor/libs/perfect-scrollbar/perfect-scrollbar.js"></script>
  <script src="../assets/vendor/libs/hammer/hammer.js"></script>
  <script src="../assets/vendor/js/menu.js"></script>

  <!-- Vendors JS -->
  <script src="../assets/vendor/libs/select2/select2.js"></script>
  <script src="../assets/vendor/libs/flatpickr/flatpickr.js"></script>
  <script src="../assets/vendor/libs/sweetalert2/sweetalert2.js"></script>

  <!-- Main JS -->
  <script src="../assets/js/main.js"></script>

  <!-- Page JS -->
  <script>
    document.addEventListener('DOMContentLoaded', function() {
      // Initialize Select2
      $('.select2').select2();
      
      // Initialize Flatpickr (Date picker)
      flatpickr(".flatpickr-date", {
        dateFormat: "d/m/Y",
        allowInput: true,
        locale: 'th'
      });
      
      // Set the return date to 7 days after withdraw date by default
      const withdrawDateInput = document.getElementById('withdrawDate');
      const returnDateInput = document.getElementById('returnDate');
      if (withdrawDateInput && returnDateInput) {
        const withdrawDate = withdrawDateInput.value;
        if (withdrawDate) {
          const parts = withdrawDate.split('/');
          const date = new Date(parts[2], parts[1] - 1, parts[0]);
          date.setDate(date.getDate() + 7);
          
          const day = date.getDate().toString().padStart(2, '0');
          const month = (date.getMonth() + 1).toString().padStart(2, '0');
          const year = date.getFullYear();
          
          returnDateInput.value = `${day}/${month}/${year}`;
        }
      }
      
      // Toggle between withdraw and return forms
      const withdrawOption = document.getElementById('withdrawOption');
      const returnOption = document.getElementById('returnOption');
      const withdrawForm = document.getElementById('withdrawForm');
      const returnForm = document.getElementById('returnForm');
      
      withdrawOption.addEventListener('click', function() {
        withdrawOption.classList.add('checked');
        returnOption.classList.remove('checked');
        withdrawForm.style.display = 'block';
        returnForm.style.display = 'none';
      });
      
      returnOption.addEventListener('click', function() {
        returnOption.classList.add('checked');
        withdrawOption.classList.remove('checked');
        returnForm.style.display = 'block';
        withdrawForm.style.display = 'none';
      });
      
      // Toggle other project input
      const projectSelect = document.getElementById('projectSelect');
      const otherProjectDiv = document.getElementById('otherProjectDiv');
      
      projectSelect.addEventListener('change', function() {
        if (this.value === '0') {
          otherProjectDiv.style.display = 'block';
        } else {
          otherProjectDiv.style.display = 'none';
        }
      });
      
      // Submit withdraw form
      const submitWithdrawBtn = document.getElementById('submitWithdrawBtn');
      
      submitWithdrawBtn.addEventListener('click', function() {
        // Check if at least one item is selected
        const tableBody = document.querySelector('#selectedItemsTable tbody');
        if (tableBody.querySelector('.empty-row')) {
          Swal.fire({
            title: 'ไม่พบวัสดุที่เลือก',
            text: 'กรุณาเลือกวัสดุที่ต้องการเบิกอย่างน้อย 1 รายการ',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        // Validate required fields
        const projectSelect = document.getElementById('projectSelect');
        const otherProject = document.getElementById('otherProject');
        const requestor = document.getElementById('requestor');
        const withdrawDate = document.getElementById('withdrawDate');
        const returnDate = document.getElementById('returnDate');
        
        if (!projectSelect.value) {
          Swal.fire({
            title: 'ข้อมูลไม่ครบถ้วน',
            text: 'กรุณาเลือกโครงการ/งาน',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        if (projectSelect.value === '0' && !otherProject.value) {
          Swal.fire({
            title: 'ข้อมูลไม่ครบถ้วน',
            text: 'กรุณาระบุชื่อโครงการ/งาน',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        if (!requestor.value) {
          Swal.fire({
            title: 'ข้อมูลไม่ครบถ้วน',
            text: 'กรุณาเลือกผู้เบิก',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        if (!withdrawDate.value) {
          Swal.fire({
            title: 'ข้อมูลไม่ครบถ้วน',
            text: 'กรุณาระบุวันที่เบิก',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        if (!returnDate.value) {
          Swal.fire({
            title: 'ข้อมูลไม่ครบถ้วน',
            text: 'กรุณาระบุกำหนดวันคืน',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        // Open success modal
        const withdrawSuccessModal = new bootstrap.Modal(document.getElementById('withdrawSuccessModal'));
        withdrawSuccessModal.show();
      });
      
      // Submit return form
      const submitReturnBtn = document.getElementById('submitReturnBtn');
      
      submitReturnBtn.addEventListener('click', function() {
        // Check if at least one item is selected
        const tableBody = document.querySelector('#returnItemsTable tbody');
        if (tableBody.querySelector('.empty-row')) {
          Swal.fire({
            title: 'ไม่พบวัสดุที่เลือก',
            text: 'กรุณาเลือกวัสดุที่ต้องการคืนอย่างน้อย 1 รายการ',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        // Validate required fields
        const returnUser = document.getElementById('returnUser');
        const actualReturnDate = document.getElementById('actualReturnDate');
        
        if (!returnUser.value) {
          Swal.fire({
            title: 'ข้อมูลไม่ครบถ้วน',
            text: 'กรุณาเลือกผู้คืน',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        if (!actualReturnDate.value) {
          Swal.fire({
            title: 'ข้อมูลไม่ครบถ้วน',
            text: 'กรุณาระบุวันที่คืน',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        // Check condition values
        const conditionInputs = document.querySelectorAll('.item-condition');
        let allValid = true;
        
        conditionInputs.forEach(function(input) {
          if (!input.value) {
            allValid = false;
          }
        });
        
        if (!allValid) {
          Swal.fire({
            title: 'ข้อมูลไม่ครบถ้วน',
            text: 'กรุณาระบุสภาพวัสดุทุกรายการ',
            icon: 'warning',
            confirmButtonText: 'ตกลง'
          });
          return;
        }
        
        // Open success modal
        const returnSuccessModal = new bootstrap.Modal(document.getElementById('returnSuccessModal'));
        returnSuccessModal.show();
      });
    });
    
    // Function to select an item for withdrawal
    let selectedItems = [];
    let totalItemsPrice = 0;
    
    function selectItem(id, name, price) {
      // Check if item is already selected
      if (selectedItems.includes(id)) {
        Swal.fire({
          title: 'วัสดุถูกเลือกแล้ว',
          text: 'วัสดุนี้ได้ถูกเลือกไปแล้ว',
          icon: 'info',
          confirmButtonText: 'ตกลง'
        });
        return;
      }
      
      // Add to selected items array
      selectedItems.push(id);
      totalItemsPrice += price;
      
      // Update table
      const tableBody = document.querySelector('#selectedItemsTable tbody');
      const emptyRow = tableBody.querySelector('.empty-row');
      
      if (emptyRow) {
        tableBody.innerHTML = '';
      }
      
      const newRow = document.createElement('tr');
      newRow.setAttribute('data-id', id);
      newRow.setAttribute('data-price', price);
      newRow.innerHTML = `
        <td>${id}</td>
        <td>${name}</td>
        <td>${price.toLocaleString('th-TH')}</td>
        <td>
          <input type="text" class="form-control form-control-sm" placeholder="ระบุเหตุผลการเบิก">
        </td>
        <td>
          <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeItem('${id}')">
            <i class="bx bx-trash me-1"></i> ลบ
          </button>
        </td>
      `;
      
      tableBody.appendChild(newRow);
      
      // Show footer with total
      const cartFooter = document.getElementById('cartFooter');
      cartFooter.style.display = 'table-row-group';
      
      // Update total price
      document.getElementById('totalPrice').textContent = totalItemsPrice.toLocaleString('th-TH') + ' บาท';
    }
    
    // Function to remove an item from selection
    function removeItem(id) {
      // Find the item
      const row = document.querySelector(`#selectedItemsTable tbody tr[data-id="${id}"]`);
      const price = parseInt(row.getAttribute('data-price'));
      
      // Remove from array
      const index = selectedItems.indexOf(id);
      if (index > -1) {
        selectedItems.splice(index, 1);
      }
      
      // Update total price
      totalItemsPrice -= price;
      document.getElementById('totalPrice').textContent = totalItemsPrice.toLocaleString('th-TH') + ' บาท';
      
      // Remove row
      row.remove();
      
      // If no items left, show empty row
      if (selectedItems.length === 0) {
        const tableBody = document.querySelector('#selectedItemsTable tbody');
        tableBody.innerHTML = `
          <tr class="empty-row">
            <td colspan="5" class="text-center py-4 text-muted">
              <i class="bx bx-package mb-2" style="font-size: 2rem;"></i>
              <p class="mb-0">ยังไม่มีรายการที่เลือก</p>
              <small>กรุณาค้นหาและเลือกวัสดุที่ต้องการเบิก</small>
            </td>
          </tr>
        `;
        
        // Hide footer
        document.getElementById('cartFooter').style.display = 'none';
      }
    }
    
    // Function to select an item for return
    let itemsToReturn = [];
    
    function selectForReturn(id, name, project, borrowDate) {
      // Check if already selected
      if (itemsToReturn.includes(id)) {
        Swal.fire({
          title: 'วัสดุถูกเลือกแล้ว',
          text: 'วัสดุนี้ได้ถูกเลือกไปแล้ว',
          icon: 'info',
          confirmButtonText: 'ตกลง'
        });
        return;
      }
      
      // Add to array
      itemsToReturn.push(id);
      
      // Update table
      const tableBody = document.querySelector('#returnItemsTable tbody');
      const emptyRow = tableBody.querySelector('.empty-row');
      
      if (emptyRow) {
        tableBody.innerHTML = '';
      }
      
      const newRow = document.createElement('tr');
      newRow.setAttribute('data-id', id);
      newRow.innerHTML = `
        <td>${id}</td>
        <td>${name}</td>
        <td>${borrowDate}</td>
        <td>
          <select class="form-select form-select-sm item-condition">
            <option value="">-- เลือกสภาพวัสดุ --</option>
            <option value="perfect">สภาพสมบูรณ์</option>
            <option value="good">สภาพดี</option>
            <option value="usable">ใช้งานได้</option>
            <option value="damaged">ชำรุดเล็กน้อย</option>
            <option value="broken">ชำรุดมาก</option>
          </select>
        </td>
        <td>
          <button type="button" class="btn btn-sm btn-outline-danger" onclick="removeReturnItem('${id}')">
            <i class="bx bx-trash me-1"></i> ลบ
          </button>
        </td>
      `;
      
      tableBody.appendChild(newRow);
    }
    
    // Function to remove an item from return list
    function removeReturnItem(id) {
      // Remove from array
      const index = itemsToReturn.indexOf(id);
      if (index > -1) {
        itemsToReturn.splice(index, 1);
      }
      
      // Remove row
      const row = document.querySelector(`#returnItemsTable tbody tr[data-id="${id}"]`);
      row.remove();
      
      // If no items left, show empty row
      if (itemsToReturn.length === 0) {
        const tableBody = document.querySelector('#returnItemsTable tbody');
        tableBody.innerHTML = `
          <tr class="empty-row">
            <td colspan="5" class="text-center py-4 text-muted">
              <i class="bx bx-package mb-2" style="font-size: 2rem;"></i>
              <p class="mb-0">ยังไม่มีรายการที่เลือก</p>
              <small>กรุณาเลือกวัสดุที่ต้องการคืน</small>
            </td>
          </tr>
        `;
      }
    }
  </script>
</body>
</html>